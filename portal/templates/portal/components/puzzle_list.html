{% if latest_submission_list %}
<div class='flex flex-row justify-between align-center'>
    {% if scroll_buttons_enabled %}
    <button class='sm:min-w-[80px] rounded bg-zinc-400 text-white mr-4' onclick='scrollDiv("L")'>&lt;</button>
    {% endif %}
    <div class='flex flex-row items-center overflow-y-auto text-left lg:max-w-3xl mx-auto scroll-smooth px-10'
        id='container'>
        {% for submission in latest_submission_list %}
        <div class='mx-2 h-full flex items-center flex-col w-[400px] min-w-[400px]'>
            <p class='text-center'>{{submission.submitter.name}} - #{{submission.wordle_number}}</p>
            <br />
            <textarea readonly rows=9
                class='overflow-none text-center bg-transparent overflow-y-hidden m-auto mt-0 w-[6.5em]'>
                        {{submission.submission_text}}
                    </textarea>
            <div class='flex justify-start items-start flex-wrap'>
                {% for reaction in submission.reaction_list %}
                <div class='rounded-lg bg-zinc-300 px-2 py-2 text-zinc-500 mr-4 mb-4'>
                    {{reaction}}
                </div>
                {% endfor %}
            </div>
            <div class='flex flex-col justify-center w-full'>
                <button onclick='showEmojiPicker({{submission.id}})'
                    class='rounded-lg bg-zinc-300 px-2 py-0 w-full h-[100px] m-auto mb-[30px]'>
                    +Reaction
                </button>

                <dialog id='{{submission.id}}' class='w-[90vw] max-w-[900px] h-[425px] rounded-xl'>
                    <button onclick='hideEmojiPicker({{submission.id}})'
                        class='absolute top-0 right-0 rounded-full bg-zinc-300 px-2 py-0 mr-3 mt-3 w-[120px] h-[120px]'>
                        X
                    </button>
                    <div class='flex justify-center h-full w-full'>
                        <form action="{% url 'portal:react' %}" method="post"
                            class='flex justify-center items-center flex-col mt-[40px]'>
                            {% csrf_token %}
                            <input value={{submission.id}} name='wordle_submission_id' readonly class='hidden'></input>
                            <div class='flex justify-evenly items-center text-8xl w-[90%]'>
                                <button name='reaction_0' value='0' action='submit'>&nbsp;😢&nbsp;</button>
                                <button name='reaction_1' value='1' action='submit'>&nbsp;🤯&nbsp;</button>
                                <button name='reaction_2' value='2' action='submit'>&nbsp;😮&nbsp;</button>
                                <button name='reaction_3' value='3' action='submit'>&nbsp;👏&nbsp;</button>
                                <button name='reaction_4' value='4' action='submit'>&nbsp;🦧&nbsp;</button>
                            </div>
                        </form>
                    </div>
                </dialog>
            </div>
        </div>
        {% endfor %}
    </div>
    {% if scroll_buttons_enabled %}
    <button class='sm:min-w-[80px] rounded bg-zinc-400 text-white ml-4' onclick='scrollDiv("R")'>&gt;</button>
    {% endif %}
</div>
<script>
    function scrollDiv(direction) {
        let container = document.querySelector('#container');
        if (direction == "R") {
            container.scrollLeft += 420;
        } else {
            container.scrollLeft -= 420;
        }
    }

    function showEmojiPicker(id) {
        document.getElementById(id).showModal();
    }
    function hideEmojiPicker(id) {
        document.getElementById(id).close();
    }

    // Fix annoying extra whitespace at start and end of wordle submissions
    document.querySelectorAll('textarea').forEach(te => {
        te.value = te.value.trim();
    });
</script>
{% else %}
<p>No submissions to show.</p>
{% endif %}